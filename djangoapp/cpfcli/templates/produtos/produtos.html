{% extends 'index.html' %}
{% load static %}
{% block title %}{{title}}{% endblock %}

{% block content %}
    <div class="container-fluid vh-75 d-flex flex-start flex-wrap">
        <div class="container-fluid">
            {% include 'partials/message.html' %}
            <div class="mt-3 table-responsive">
                <table class="table tableSearch table-primary table-hover table-striped">
                    <thead>
                        <tr>
                            <th class="text-start">CÓDIGO CAMPANHA</th>
                            <th class="text-start">CODPROD</th>
                            <th class="text-start">DESCRIÇÃO</th>
                            <th class="text-start">DT CADASTRO</th>
                            <th class="text-start">AÇÕES</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for produto in listprodutos %}
                            <tr>
                                <td class="text-start">{{produto.0}}</td>
                                <td class="text-start">{{produto.1}}</td>
                                <td class="text-start">{{produto.3}}</td>
                                <td class="text-start">{{produto.2}}</td>
                                <td class="text-start col-2">
                                    <button type="button" class="btn btn-danger btn-sm"  data-bs-toggle="modal" data-bs-target="#delete{{produto.0}}{{produto.1}}" ><i class="fas fa-trash-alt"></i></button>
                                </td>
                            </tr>
                            <!-- Modal de deletar -->
                            <div class="modal fade" id="delete{{produto.0}}{{produto.1}}" tabindex="-1" aria-labelledby="delete{{produto.0}}{{produto.1}}ds" aria-hidden="true">
                                <div class="modal-dialog">
                                    <form class="modal-content needs-validation" method="POST">
                                        {% csrf_token %}
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="delete{{produto.0}}{{produto.1}}ds">Deletar {{campanha.1}}</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body modal-body1 d-flex justify-content-start flex-wrap">
                                                <input type="hidden" value="{{produto.0}}" name="idcampanha" id="idcampanha"/>
                                                <input type="hidden" value="{{produto.1}}" name="codprod" id="codprod"/>
                                                <div class="text-center w-100 mt-5 mb-4">
                                                    <i class="fa-solid fa-circle-xmark fa-6x " style="color: Tomato;"></i>
                                                </div>
                                                <div class="text-center w-100 mb-3">
                                                    <h4 class="modal-title">Você tem certeza?</h4>
                                                </div>
                                                <div class="form-group">
                                                    <p class="text-center">Deseja realmente deletar o produto? O mesmo não será mais contabilizado na campanha</p></p>
                                                </div>
                                            </div>
                                            <div class="modal-footer d-flex justify-content-center flex-nowrap">
                                                <button type="button" class="btn btn-secondary col-6" data-bs-dismiss="modal">Cancelar</button>
                                                <button type="submit" name="delete" class="btn btn-danger col-6">Deletar</button>
                                                <button type="submit" name="insert2" class="btn btn-secondary d-none">Salvar</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        {% endfor %}
                    </tbody>
                </table>

                {% include 'partials/components/insertmodal.html' %} 
            </div>
        </div>
    </div> 

{% endblock %}